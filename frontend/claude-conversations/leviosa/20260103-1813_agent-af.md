# Claude ÎåÄÌôî Í∏∞Î°ù
**ÎÇ†Ïßú**: 2026-01-03 18:13
**ÏÑ∏ÏÖò**: agent-af1f6da

---

## üßë User

The user is trying to scrape Naver SmartStore but is still getting blocked even after applying playwright-stealth. The symptoms are:

1. Page returns only 263 characters (should be thousands)
2. Empty title
3. 0 images extracted
4. JavaScript content is not loading properly

Current setup already has:
- playwright-stealth with Korean locale
- Random user agents
- Human-like scrolling behavior
- Anti-detection browser args

But it's STILL being detected as a bot. We need STRONGER methods.

Research the following:

1. **Why JavaScript might not be loading** on Naver SmartStore - are they using advanced JS challenges?

2. **Stronger anti-detection methods** beyond playwright-stealth:
   - nodriver (undetected-chromedriver successor)
   - Botasaurus framework
   - rebrowser-patches
   - patchright (patched playwright)
   - Any other 2024-2025 solutions

3. **Naver-specific bypass techniques**:
   - Cookie requirements
   - Session warming (visiting naver.com first before smartstore)
   - Required JavaScript execution patterns
   - Any Naver-specific headers or tokens

4. **CDP (Chrome DevTools Protocol) detection bypass**:
   - How to avoid CDP fingerprinting
   - Alternative browser automation that doesn't use CDP

5. **Practical code examples** that work for Korean e-commerce sites in 2024-2025

Search queries:
- "naver smartstore javascript not loading scraping 2024"
- "playwright detected naver bypass 2025"
- "patchright vs playwright stealth"
- "nodriver naver korea scraping"
- "rebrowser-patches playwright"
- "botasaurus korean sites"
- "CDP detection bypass playwright"
- "ÎÑ§Ïù¥Î≤Ñ Ïä§ÎßàÌä∏Ïä§ÌÜ†Ïñ¥ ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ ÌÅ¨Î°§ÎßÅ"

Focus on finding WORKING solutions, not theoretical approaches.

---

## ü§ñ Claude

I'll conduct a comprehensive research investigation into stronger anti-detection methods for Naver SmartStore scraping. Let me search for the most current and effective solutions.

---

## ü§ñ Claude

[Tool: WebSearch]

---

## ü§ñ Claude

[Tool: WebSearch]

---

## ü§ñ Claude

[Tool: WebSearch]

---

## ü§ñ Claude

[Tool: WebSearch]

---

## ü§ñ Claude

[Tool: WebSearch]

---

## üßë User

[Tool Result]

---

## üßë User

[Tool Result]

---

## üßë User

[Tool Result]

---

## üßë User

[Tool Result]

---

## üßë User

[Tool Result]

---

## ü§ñ Claude

Let me continue researching more specific solutions:

---

## ü§ñ Claude

[Tool: WebSearch]

---

## ü§ñ Claude

[Tool: WebSearch]

---

## ü§ñ Claude

[Tool: WebSearch]

---

## ü§ñ Claude

[Tool: WebSearch]

---

## ü§ñ Claude

[Tool: WebSearch]

---

## üßë User

[Tool Result]

---

## üßë User

[Tool Result]

---

## üßë User

[Tool Result]

---

## üßë User

[Tool Result]

---

## üßë User

[Tool Result]

---

## ü§ñ Claude

Now let me search for more specific practical solutions:

---

## ü§ñ Claude

[Tool: WebSearch]

---

## ü§ñ Claude

[Tool: WebSearch]

---

## ü§ñ Claude

[Tool: WebSearch]

---

## ü§ñ Claude

[Tool: WebSearch]

---

## üßë User

[Tool Result]

---

## üßë User

[Tool Result]

---

## üßë User

[Tool Result]

---

## üßë User

[Tool Result]

---

## ü§ñ Claude

# Executive Summary

Your Naver SmartStore scraping is being blocked due to **CDP (Chrome DevTools Protocol) detection** and **aggressive anti-bot systems** that detect automation at the protocol level. Playwright-stealth is outdated and insufficient for 2024-2025. You need **stronger anti-detection frameworks** that bypass CDP detection entirely, plus **Korean residential proxies** and **session warming**.

## Key Findings

### 1. Why JavaScript Isn't Loading

**Naver's Multi-Layered Detection:**
- Naver uses **multi-layered JavaScript challenges** tied to region and session behavior ([GroupBWT](https://groupbwt.com/blog/how-to-scrape-data-from-naver/))
- If your scraper doesn't match expected patterns (browser fingerprint, TLS, execution timing), **rendering silently fails** ([Scrape.do](https://scrape.do/blog/naver-scraping/))
- Pages return 200 OK but **never actually return real content** unless every script executes correctly in the right sequence ([GroupBWT](https://groupbwt.com/blog/how-to-scrape-data-from-naver/))

**CDP Detection Problem:**
- Playwright sends the `Runtime.enable` CDP command, which anti-bot systems like Cloudflare and DataDome **specifically detect** ([Rebrowser](https://rebrowser.net/blog/how-to-fix-runtime-enable-cdp-detection-of-puppeteer-playwright-and-other-automation-libraries))
- This single command is like **"waving a giant flag saying 'Hey, I'm automated!'"** ([DEV Community](https://dev.to/claudeprime/patchright-vs-playwright-when-to-use-the-stealth-browser-fork-382a))
- Websites can detect CDP usage through a specially crafted challenge that checks if data is being serialized via WebSocket ([Castle.io](https://blog.castle.io/how-to-detect-scripts-injected-via-cdp-in-chrome-2/))

**Naver-Specific Blocking:**
- Naver is **"AGGRESSIVE"** when it comes to breaking down crawlers ([Scrape.do](https://scrape.do/blog/naver-scraping/))
- Actively **blocks datacenter IPs** from AWS, GCP, and commercial proxy providers ([GroupBWT](https://groupbwt.com/blog/how-to-scrape-data-from-naver/))
- Tracks **session realism**: click intervals, scroll pacing, cookie aging, cursor behavior ([GroupBWT](https://groupbwt.com/blog/how-to-scrape-data-from-naver/))

### 2. Stronger Anti-Detection Methods (2024-2025)

**Benchmark Results ([Medium](https://medium.com/@dimakynal/baseline-performance-comparison-of-nodriver-zendriver-selenium-and-playwright-against-anti-bot-2e593db4b243)):**
- **Nodriver**: 83.3/100 (Best)
- **Patchright**: 66.7/100 
- **Playwright-stealth**: 50.0/100 (Your current approach - weakest)

#### **Option A: Nodriver (Recommended - Highest Success Rate)**

**What it is:**
- Official successor of undetected-chromedriver ([GitHub](https://github.com/ultrafunkamsterdam/nodriver))
- **Fully async**, doesn't depend on Selenium or ChromeDriver binaries ([ScrapingBee](https://www.scrapingbee.com/blog/nodriver-tutorial/))
- Communicates directly with browsers via **custom CDP implementation** ([ZenRows](https://www.zenrows.com/blog/nodriver))

**Why it's better:**
- **Avoids detection vectors entirely** rather than patching them ([RoundProxies](https://roundproxies.com/blog/best-patchright-alternatives/))
- Fundamental shift from "patching automation" to **"rethinking automation architecture"** ([Castle.io](https://blog.castle.io/from-puppeteer-stealth-to-nodriver-how-anti-detect-frameworks-evolved-to-evade-bot-detection/))
- **83.3% bypass rate** vs 50% for playwright-stealth ([Medium](https://medium.com/@dimakynal/baseline-performance-comparison-of-nodriver-zendriver-selenium-and-playwright-against-anti-bot-2e593db4b243))

**Installation:**
```python
pip install nodriver
```

**Basic Usage:**
```python
import nodriver as uc

async def main():
    browser = await uc.start()
    page = await browser.get('https://smartstore.naver.com/...')
    # Your scraping code here
    
if __name__ == '__main__':
    uc.loop().run_until_complete(main())
```

**Limitations:**
- Newer than Selenium/Playwright, **fewer Stack Overflow answers** ([ZenRows](https://www.zenrows.com/blog/nodriver))
- Can still fail on some sites ([ScrapingBee](https://www.scrapingbee.com/blog/undetected-chromedriver-python-tutorial-avoiding-bot-detection/))

#### **Option B: Patchright (Drop-in Playwright Replacement)**

**What it is:**
- Patched Playwright fork that fixes **CDP leaks at source level** ([GitHub](https://github.com/Kaliiiiiiiiii-Vinyzu/patchright-python))
- Executes JavaScript in **isolated ExecutionContexts** instead of using Runtime.enable ([Rebrowser](https://rebrowser.net/blog/how-to-fix-runtime-enable-cdp-detection-of-puppeteer-playwright-and-other-automation-libraries))
- Drop-in replacement - **minimal code changes** ([DEV Community](https://dev.to/claudeprime/patchright-vs-playwright-when-to-use-the-stealth-browser-fork-382a))

**Why it's better:**
- Reduces headless detection from **100% to 67%** ([ScrapingBee](https://www.scrapingbee.com/blog/creepjs-browser-fingerprinting/))
- **No Runtime.enable command** sent to browser ([RoundProxies](https://roundproxies.com/blog/patchright/))
- Patches command flags: removes `--enable-automation`, adds `--disable-blink-features=AutomationControlled` ([DEV Community](https://dev.to/claudeprime/patchright-vs-playwright-when-to-use-the-stealth-browser-fork-382a))

**Installation:**
```python
pip install patchright
```

**Usage (drop-in replacement):**
```python
# Change this:
from playwright.async_api import async_playwright

# To this:
from patchright.async_api import async_playwright

# Rest of code stays the same!
# But use channel="chrome" instead of chromium
browser = await p.chromium.launch(channel="chrome")
```

**Best Practices:**
- **Always use Google Chrome** instead of Chromium - real users don't browse with Chromium ([RoundProxies](https://roundproxies.com/blog/patchright/))
- **Don't combine with playwright-stealth** - causes conflicts ([RoundProxies](https://roundproxies.com/blog/best-patchright-alternatives/))
- Still need **human-like delays and mouse movements** ([DEV Community](https://dev.to/claudeprime/patchright-vs-playwright-when-to-use-the-stealth-browser-fork-382a))

#### **Option C: rebrowser-patches (Playwright Patches)**

**What it is:**
- Collection of **runtime patches** for Playwright to avoid CDP detection ([GitHub](https://github.com/rebrowser/rebrowser-patches))
- Fixes Runtime.enable detection used by **Cloudflare and DataDome** ([Rebrowser](https://rebrowser.net/docs/patches-for-puppeteer-and-playwright))
- Can be **enabled/disabled on demand** ([GitHub](https://github.com/rebrowser/rebrowser-patches))

**Two Approaches:**
1. **Isolated Context**: Creates separate isolated world, prevents page scripts from detecting changes via MutationObserver ([Rebrowser](https://rebrowser.net/blog/how-to-fix-runtime-enable-cdp-detection-of-puppeteer-playwright-and-other-automation-libraries))
2. **addBinding Technique**: Full access to main context but slight detection risk ([Rebrowser](https://rebrowser.net/blog/how-to-fix-runtime-enable-cdp-detection-of-puppeteer-playwright-and-other-automation-libraries))

**Drop-in Package:**
```python
pip install rebrowser-playwright
# Use rebrowser-playwright instead of playwright
```

**Configuration:**
```bash
# Switch modes with environment variable
export REBROWSER_PATCHES_RUNTIME_FIX_MODE=addBinding
```

**Status:**
- **Currently undetectable** by Cloudflare or DataDome ([Rebrowser](https://rebrowser.net/blog/how-to-fix-runtime-enable-cdp-detection-of-puppeteer-playwright-and-other-automation-libraries))

#### **Option D: Botasaurus (All-in-One Framework)**

**What it is:**
- All-in-one framework built on **patched Selenium** ([ZenRows](https://www.zenrows.com/blog/botasaurus))
- **Higher success rate** than Undetected ChromeDriver, Selenium Stealth, Puppeteer Stealth ([RoundProxies](https://roundproxies.com/blog/botasaurus/))
- Handles **up to 200 parallel sessions** ([RoundProxies](https://roundproxies.com/blog/botasaurus/))

**Installation:**
```python
pip install botasaurus
```

**Note:** No specific Naver examples found, but designed for **bypassing Cloudflare** ([GitHub](https://github.com/omkarcloud/botasaurus))

### 3. Naver-Specific Bypass Techniques

#### **Cookie and Session Requirements:**

**Session Warming:**
- Naver tracks **click intervals, scroll pacing, cookie aging, cursor behavior** ([GroupBWT](https://groupbwt.com/blog/how-to-scrape-data-from-naver/))
- **"Bots that mimic humans outperform bots that try to dodge detection"** ([Scrape.do](https://scrape.do/blog/naver-scraping/))
- Visit naver.com first before smartstore to **establish session** ([GroupBWT](https://groupbwt.com/blog/how-to-scrape-data-from-naver/))

**Required Pattern:**
```python
# 1. Visit main Naver site first
await page.goto('https://www.naver.com')
await page.wait_for_timeout(2000 + random.randint(500, 2000))

# 2. Scroll naturally
for i in range(3):
    await page.mouse.wheel(0, random.randint(100, 300))
    await page.wait_for_timeout(random.randint(800, 1500))

# 3. Then navigate to SmartStore
await page.goto('https://smartstore.naver.com/...')
```

#### **Residential Proxy Requirements (CRITICAL):**

**Why Datacenter IPs Fail:**
- Naver **actively blocks datacenter IPs** from AWS, GCP, commercial providers ([GroupBWT](https://groupbwt.com/blog/how-to-scrape-data-from-naver/))
- You need **residential or mobile IPs from Korean ISPs** ([Scrape.do](https://scrape.do/blog/naver-scraping/))

**Recommended Proxy Providers:**
- **Oxylabs**: 1.3 million South Korean IPs with city-level targeting ([Oxylabs](https://oxylabs.io/location-proxy/south-korea))
- **Bright Data**: 201,000+ Korean IPs (residential, mobile, ISP) ([ProxyEmpire](https://proxyempire.io/best-korean-proxy-services-2025/))
- **SmartProxy**: 58,000+ South Korean IPs ([ProxyEmpire](https://proxyempire.io/best-korean-proxy-services-2025/))

**Configuration:**
```python
proxy = {
    'server': 'http://korean-residential-proxy.com:port',
    'username': 'user',
    'password': 'pass'
}
browser = await p.chromium.launch(proxy=proxy)
```

#### **API Alternative (Recommended for Production):**

**Naver Commerce API:**
- Naver officially **blocks SmartStore scraping** as of March 2024 ([i-Boss](https://www.i-boss.co.kr/ab-1486505-46774))
- They recommend using **Commerce API Center** instead ([i-Boss](https://www.i-boss.co.kr/ab-2877-13052))

**Backend API Approach:**
- Target internal APIs like: `https://brand.naver.com/n/v2/channels/{channel_uid}/products/{product_id}` ([Medium](https://medium.com/@scraper0024/how-to-integrate-naver-smart-store-api-in-5-minutes-to-automatically-fetch-product-data-283b469f444b))
- Returns **clean JSON data** with full product information ([Scrape.do](https://scrape.do/blog/naver-scraping/))

### 4. CDP Detection Bypass Summary

**Detection Technique:**
```javascript
// How Naver/Cloudflare detects CDP
var detected = false;
var e = new Error();
Object.defineProperty(e, 'stack', {
    get() { detected = true; }
});
console.log(e);
// If detected === true, browser is automated
```

**Why Standard Playwright Fails:**
- Sends `Runtime.enable` command on every frame ([Rebrowser](https://rebrowser.net/blog/how-to-fix-runtime-enable-cdp-detection-of-puppeteer-playwright-and-other-automation-libraries))
- Anti-bot systems **specifically look for this command** ([DataDome](https://datadome.co/threat-research/how-new-headless-chrome-the-cdp-signal-are-impacting-bot-detection/))
- Other detection vectors: `Input.coordinatesLeak`, `Page.evaluateOnNewDocument` ([Castle.io](https://blog.castle.io/how-to-detect-scripts-injected-via-cdp-in-chrome-2/))

**Solutions Ranking:**
1. **Nodriver**: Avoids CDP detection entirely (83.3% success)
2. **Patchright/rebrowser-patches**: Fixes CDP at source level (66.7% success)
3. **Playwright-stealth**: Outdated, easily detected (50% success)

### 5. Practical Code Example (Patchright + Korean Proxy + Session Warming)

```python
from patchright.async_api import async_playwright
import random
import asyncio

async def scrape_naver_smartstore(url: str):
    async with async_playwright() as p:
        # Use Chrome, not Chromium
        browser = await p.chromium.launch(
            channel="chrome",  # Critical for detection avoidance
            headless=False,  # Some sites detect headless
            proxy={
                'server': 'http://korean-residential-proxy:8080',
                'username': 'user',
                'password': 'pass'
            },
            args=[
                '--disable-blink-features=AutomationControlled',
                '--disable-dev-shm-usage',
                '--no-sandbox'
            ]
        )
        
        context = await browser.new_context(
            locale='ko-KR',
            timezone_id='Asia/Seoul',
            viewport={'width': 1920, 'height': 1080},
            user_agent='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
        )
        
        page = await context.new_page()
        
        # Session warming - visit Naver first
        await page.goto('https://www.naver.com')
        await asyncio.sleep(2 + random.uniform(0.5, 2))
        
        # Human-like scrolling
        for _ in range(3):
            await page.mouse.wheel(0, random.randint(100, 300))
            await asyncio.sleep(random.uniform(0.8, 1.5))
        
        # Now visit SmartStore
        await page.goto(url, wait_until='networkidle')
        await asyncio.sleep(3 + random.uniform(1, 3))
        
        # Extract data
        content = await page.content()
        title = await page.title()
        
        print(f"Title: {title}")
        print(f"Content length: {len(content)}")
        
        await browser.close()

asyncio.run(scrape_naver_smartstore('https://smartstore.naver.com/...'))
```

## Recommendations

### Short-term (Try First):
1. **Switch to Patchright** (easiest - drop-in replacement)
2. **Add Korean residential proxy** (essential)
3. **Implement session warming** (visit naver.com first)

### Medium-term (Better Success):
1. **Migrate to Nodriver** (highest success rate - 83.3%)
2. **Use premium Korean proxies** (Oxylabs, Bright Data)
3. **Add realistic delays and mouse movements**

### Long-term (Production):
1. **Use Naver Commerce API** (official, legal, reliable)
2. **Target backend JSON APIs** instead of HTML scraping
3. **Consider commercial scraping services** (Apify, Scrape.do)

## Sources

- [Scraping Naver: Search Results, Images, Products, Ads using Python | Scrape.do](https://scrape.do/blog/naver-scraping/)
- [How to Scrape Data from Naver for Strategic Data Extraction in 2025](https://groupbwt.com/blog/how-to-scrape-data-from-naver/)
- [How to Make Playwright Scraping Undetectable | ScrapingAnt](https://scrapingant.com/blog/playwright-scraping-undetectable)
- [Patchright vs Playwright: When to Use the Stealth Browser Fork - DEV Community](https://dev.to/claudeprime/patchright-vs-playwright-when-to-use-the-stealth-browser-fork-382a)
- [GitHub - Kaliiiiiiiiii-Vinyzu/patchright: Undetected version of the Playwright testing and automation library](https://github.com/Kaliiiiiiiiii-Vinyzu/patchright)
- [GitHub - ultrafunkamsterdam/nodriver: Successor of Undetected-Chromedriver](https://github.com/ultrafunkamsterdam/nodriver)
- [How to Use Nodriver for Web Scraping - ZenRows](https://www.zenrows.com/blog/nodriver)
- [Scraping with Nodriver: Step by Step Tutorial with Examples | ScrapingBee](https://www.scrapingbee.com/blog/nodriver-tutorial/)
- [How to fix Runtime.Enable CDP detection of Puppeteer, Playwright and other automation libraries? / Rebrowser](https://rebrowser.net/blog/how-to-fix-runtime-enable-cdp-detection-of-puppeteer-playwright-and-other-automation-libraries)
- [GitHub - rebrowser/rebrowser-patches: Collection of patches for puppeteer and playwright](https://github.com/rebrowser/rebrowser-patches)
- [How New Headless Chrome & the CDP Signal Are Impacting Bot Detection](https://datadome.co/threat-research/how-new-headless-chrome-the-cdp-signal-are-impacting-bot-detection/)
- [From Puppeteer stealth to Nodriver: How anti-detect frameworks evolved to evade bot detection](https://blog.castle.io/from-puppeteer-stealth-to-nodriver-how-anti-detect-frameworks-evolved-to-evade-bot-detection/)
- [Baseline Performance Comparison of Nodriver, Zendriver, Selenium, and Playwright Against Anti-Bot Services | by Dima Kynal | Medium](https://medium.com/@dimakynal/baseline-performance-comparison-of-nodriver-zendriver-selenium-and-playwright-against-anti-bot-2e593db4b243)
- [Buy South Korea Korea Proxy Servers from Residential & SOCKS5 IPs](https://oxylabs.io/location-proxy/south-korea)
- [ÎÑ§Ïù¥Î≤Ñ, Ïä§ÎßàÌä∏Ïä§ÌÜ†Ïñ¥ÏÑºÌÑ∞ ÌÅ¨Î°§ÎßÅ Ï∞®Îã®ÌïúÎã§ - i-Boss](https://www.i-boss.co.kr/ab-1486505-46774)
- [üë®‚Äçüíª How to Integrate Naver Smart Store API in 5 Minutes | Medium](https://medium.com/@scraper0024/how-to-integrate-naver-smart-store-api-in-5-minutes-to-automatically-fetch-product-data-283b469f444b)

---

